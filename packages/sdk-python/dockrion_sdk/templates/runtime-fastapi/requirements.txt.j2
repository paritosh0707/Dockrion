# ============================================================================
# Dockrion Agent Runtime - Python Dependencies
# ============================================================================
# Agent: {{ agent.name }}
# Framework: {{ agent.framework }}
# Generated by Dockrion SDK
# ============================================================================

{% if merged_requirements %}
# -----------------------------------------------------------------------------
# Merged Dependencies
# -----------------------------------------------------------------------------
# These dependencies include:
# - User's requirements.txt (if exists)
# - Dependencies from Dockfile.yaml arguments
# - Dockrion's required runtime dependencies
#
# Version conflicts have been automatically resolved:
# - Compatible user versions override dockrion defaults
# - Incompatible versions with core deps will cause build errors
# -----------------------------------------------------------------------------
{% for req in merged_requirements | sort %}
{{ req }}
{% endfor %}

{% else %}
# -----------------------------------------------------------------------------
# Fallback: Static Dependencies (no merged requirements available)
# -----------------------------------------------------------------------------
# This section is used when:
# - Dependency merger is not available
# - Template is rendered without project context
# -----------------------------------------------------------------------------

# Core Runtime Dependencies
# -------------------------
fastapi>=0.109.0
uvicorn[standard]>=0.27.0
pydantic>=2.5.0
pyyaml>=6.0.1

# Observability & Metrics
# -----------------------
prometheus-client>=0.19.0

# HTTP Client (for external API calls)
# ------------------------------------
httpx>=0.26.0
aiohttp>=3.9.0

{% if agent.framework | lower == 'langgraph' -%}
# LangGraph Framework
# -------------------
langgraph>=0.2.0
langchain>=0.3.0
langchain-core>=0.3.0
langchain-community>=0.3.0

{% elif agent.framework | lower == 'langchain' -%}
# LangChain Framework
# -------------------
langchain>=0.3.0
langchain-core>=0.3.0
langchain-community>=0.3.0

{% elif agent.framework | lower == 'crewai' -%}
# CrewAI Framework
# ----------------
crewai>=0.28.0
crewai-tools>=0.2.0

{% elif agent.framework | lower == 'autogen' -%}
# AutoGen Framework
# -----------------
pyautogen>=0.2.0

{% elif agent.framework | lower == 'llamaindex' -%}
# LlamaIndex Framework
# --------------------
llama-index>=0.10.0
llama-index-core>=0.10.0

{% endif -%}

{% if extra_dependencies %}
# Additional Dependencies (user-specified in Dockfile.yaml)
# ---------------------------------------------------------
{% for dep in extra_dependencies %}
{{ dep }}
{% endfor %}
{% endif %}

{% if policies and policies.safety %}
{% if policies.safety.redact_patterns %}
# Security & Policy Dependencies
# ------------------------------
regex>=2023.12.0
{% endif %}
{% endif %}

{% if observability is mapping and observability.get('langfuse') %}
# Observability: Langfuse
# -----------------------
langfuse>=2.0.0
{% endif %}

{% if observability is mapping and observability.get('langsmith') %}
# Observability: LangSmith
# ------------------------
langsmith>=0.1.0
{% endif %}
{% endif %}

